-- 初期データ投入スクリプト

-- 管理者ユーザー（パスワード: admin）
INSERT INTO users (username, password, full_name, role, enabled)
VALUES ('admin', '$2a$12$sjRM4ziNZGOElrZrLa3WFeGFgmn4qJNLyMkG/Q8hdHcOvfgiDiIYK', '管理者', 'ADMIN', true)
ON CONFLICT (username) DO NOTHING;

-- カテゴリの初期データ
INSERT INTO categories (name, description) VALUES
    ('文房具', '文房具カテゴリには、筆記用具や紙製品などが含まれます。'),
    ('家電', '家電カテゴリには、電子機器や電化製品が含まれます。'),
    ('食品', '食品カテゴリには、各種食料品や飲料が含まれます。'),
    ('日用品', '日用品カテゴリには、日常生活で使用する消耗品や雑貨が含まれます。'),
    ('衣料品', '衣料品カテゴリには、衣服やファッション小物が含まれます。')
ON CONFLICT (name) DO NOTHING;

-- 商品サンプルデータ
INSERT INTO products (name, jan_code, category_id, price, stock_quantity, stock_unit, description, status) VALUES
    ('ボールペン（黒）', '4902778001066', 1, 150, 100, '本', '滑らかな書き心地の油性ボールペン', '販売中'),
    ('ノート A4', '4901480321066', 1, 200, 50, '冊', 'A4サイズの方眼ノート', '販売中'),
    ('消しゴム', '4901480321073', 1, 100, 200, '個', 'よく消える消しゴム', '販売中'),
    ('ホチキス', '4901480321080', 1, 500, 30, '個', '10号針対応のホチキス', '販売中'),
    ('クリアファイル', '4901480321097', 1, 50, 500, '枚', 'A4サイズのクリアファイル', '販売中'),
    ('電卓', '4903767019885', 2, 1500, 5, '個', '12桁表示の実務電卓', '販売中'),
    ('USBメモリ 32GB', '4903767019892', 2, 3000, 20, '個', 'USB3.0対応の高速メモリ', '販売中'),
    ('マウス（ワイヤレス）', '4903767019908', 2, 2500, 15, '個', '省電力ワイヤレスマウス', '販売中'),
    ('キーボード', '4903767019915', 2, 3500, 10, '個', '日本語配列キーボード', '販売中'),
    ('モニター 24インチ', '4903767019922', 2, 25000, 3, '台', 'フルHD対応液晶モニター', '販売中'),
    ('インスタントコーヒー', '4901111231166', 3, 500, 30, '個', '90g入りインスタントコーヒー', '販売中'),
    ('お茶（ペットボトル）', '4901111231173', 3, 150, 100, '本', '500mlペットボトル緑茶', '販売中'),
    ('カップ麺', '4901111231180', 3, 180, 50, '個', '醤油味のカップ麺', '販売中'),
    ('チョコレート', '4901111231197', 3, 200, 40, '個', 'ミルクチョコレート', '販売中'),
    ('クッキー', '4901111231203', 3, 300, 25, '箱', 'バタークッキー詰め合わせ', '販売中'),
    ('ティッシュペーパー', '4901750177105', 4, 300, 0, '箱', '5箱入りティッシュペーパー', '販売中'),
    ('トイレットペーパー', '4901750177112', 4, 400, 50, 'パック', '12ロール入り', '販売中'),
    ('洗剤', '4901750177129', 4, 350, 30, '本', '衣類用液体洗剤', '販売中'),
    ('シャンプー', '4901750177136', 4, 600, 20, '本', 'ノンシリコンシャンプー', '販売中'),
    ('歯ブラシ', '4901750177143', 4, 150, 100, '本', 'やわらかめ歯ブラシ', '販売中')
ON CONFLICT (jan_code) DO NOTHING;

-- 在庫履歴のサンプルデータ（初期在庫設定として）
INSERT INTO inventory_histories (product_id, quantity_change, reason, operated_by) 
SELECT id, stock_quantity, '初期在庫設定', 1 
FROM products 
WHERE NOT EXISTS (
    SELECT 1 FROM inventory_histories ih 
    WHERE ih.product_id = products.id 
    AND ih.reason = '初期在庫設定'
);

-- システム設定の初期データ
INSERT INTO system_settings (key, value, description) VALUES
    ('company_name', '株式会社サンプル', '会社名'),
    ('low_stock_threshold', '10', '在庫少の判定基準'),
    ('backup_interval', '7', 'バックアップ間隔（日）'),
    ('system_email', 'admin@example.com', 'システム管理者メールアドレス'),
    ('inventory_check_enabled', 'true', '在庫チェック機能の有効/無効')
ON CONFLICT (key) DO NOTHING;
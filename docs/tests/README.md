# 商品管理システム E2Eテスト仕様書

## 概要

このドキュメントは、商品管理システムのEnd-to-End（E2E）テスト仕様をまとめたものです。
E2Eテストでは、ユーザーの実際の操作に近い形でアプリケーションの一連の機能が正常に動作することを確認します。

本システムのE2Eテストは、Playwrightを使用して実装されており、各機能領域ごとに個別のテスト仕様書が用意されています。

## テスト領域

### 認証機能

ログイン・ログアウト機能および認証エラー処理のテスト仕様です。
- ログイン成功テスト
- ログイン失敗テスト
- ログアウトテスト

[詳細を見る](auth_e2e_test.md)

### 商品管理

商品のCRUD操作および検索機能のテスト仕様です。
- 商品一覧表示テスト
- 商品新規登録テスト
- 商品詳細表示テスト
- 商品編集テスト
- 商品検索テスト

[詳細を見る](product_e2e_test.md)

### 在庫管理

在庫の追加・削減および履歴表示機能のテスト仕様です。
- 在庫一覧表示テスト
- 在庫追加テスト
- 在庫削減テスト
- 在庫履歴表示テスト

[詳細を見る](inventory_e2e_test.md)

### カテゴリ管理

商品カテゴリのCRUD操作のテスト仕様です。
- カテゴリ一覧表示テスト
- カテゴリ新規登録テスト
- カテゴリ編集テスト
- カテゴリ削除テスト

[詳細を見る](category_e2e_test.md)

### レポート機能

各種レポート機能およびアクセス制御のテスト仕様です。
- レポートアクセス制御テスト
- 各種レポートページアクセステスト
- レポートデータ表示テスト

[詳細を見る](report_e2e_test.md)

### PgAudit監視機能

データベース監査ログ記録のテスト仕様です。
- データ操作監査テスト
- 認証監査テスト

[詳細を見る](pgaudit_e2e_test.md)

### 設定機能

システム設定機能およびアクセス制御のテスト仕様です。
- 設定ページアクセステスト
- 設定ページアクセス制御テスト

[詳細を見る](settings_e2e_test.md)

## E2Eテストの実行方法

テストは以下のコマンドで実行できます：
```bash
./run-e2e-tests.sh
```

特定のテストクラスのみを実行する場合：
```bash
POSTGRES_HOST=localhost POSTGRES_PORT=5434 POSTGRES_DB=productmgr_test POSTGRES_USER=testuser POSTGRES_PASSWORD=testpass mvn -DskipClean=true test -Dtest=com.example.productmgr.e2e.playwright.ProductPlaywrightTest
```

テスト実行結果は `target/surefire-reports/` ディレクトリに出力されます。

## テスト開発ガイドライン

### テスト実装の基本原則

1. **独立性の確保**: 各テストは他のテストに依存せず、単独で実行できるようにします。テストごとにデータを自動生成します。
2. **明確な検証ポイント**: 各テストには明確な検証ポイントを設け、アサーションを適切に設定します。
3. **安定したセレクタの使用**: HTMLの構造変更に強いセレクタを使用し、必要に応じてタイムアウト値を設定します。
4. **エラー診断情報の提供**: テスト失敗時にデバッグしやすいよう、適切なメッセージを出力します。
5. **一貫したテスト命名規則**: テストメソッド名は `test + テスト対象機能` の形式で命名します。

### テストコードの品質維持

- 新機能開発時には、対応するE2Eテストも追加・更新します。
- UIの変更があった場合は、関連するテスト（特にセレクタ）を更新します。
- テストが不安定な場合は、タイムアウト値やセレクタを見直します。
- テストのパフォーマンスを定期的に見直し、必要に応じて最適化します。

---

商品管理システム E2Eテスト仕様書 © 2025
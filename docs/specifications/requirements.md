# 商品管理システム要件定義書

## 1. はじめに

### 1.1 目的
本文書は、商品管理システムの開発に関する要件を定義するものです。商品の登録、更新、検索、および在庫管理を効率的に行うためのシステム要件を明確にします。

### 1.2 対象範囲
本システムは以下の機能を対象とします：
- 商品データの登録・更新・削除
- 商品カテゴリ管理
- 在庫管理
- 商品検索
- レポート生成
- ユーザー管理

## 2. システム概要

### 2.1 システム構成
本システムはWebアプリケーションとして実装され、以下のコンポーネントで構成されます：
- フロントエンド：HTML, CSS, JavaScript (Thymeleaf)
- バックエンド：Java (Spring Boot)
- データベース：PostgreSQL

### 2.2 利用者
本システムの利用者は以下の通りです：
- 管理者：システム全体の管理権限を持ちます
- 商品管理者：商品情報の登録・更新権限を持ちます
- 在庫管理者：在庫状況の確認・更新権限を持ちます
- 閲覧者：情報の閲覧のみ可能です

## 3. 機能要件

### 3.1 商品管理機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-001 | 商品登録 | 新規商品をシステムに登録する機能 | 高 |
| F-002 | 商品検索 | 商品名、カテゴリ、JANコードなどで商品を検索する機能 | 高 |
| F-003 | 商品詳細表示 | 商品の詳細情報を表示する機能 | 高 |
| F-004 | 商品情報更新 | 既存の商品情報を更新する機能 | 高 |
| F-005 | 商品削除 | 登録済みの商品を削除（論理削除）する機能 | 中 |
| F-006 | 商品一括登録 | CSVファイルから複数の商品を一括登録する機能 | 低 |

### 3.2 カテゴリ管理機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-007 | カテゴリ登録 | 新規カテゴリをシステムに登録する機能 | 高 |
| F-008 | カテゴリ一覧表示 | カテゴリの一覧を表示する機能 | 高 |
| F-009 | カテゴリ編集 | 既存のカテゴリ情報を更新する機能 | 中 |
| F-010 | カテゴリ削除 | カテゴリを削除する機能 | 中 |
| F-011 | 階層カテゴリ管理 | 親子関係を持つ階層カテゴリを管理する機能 | 中 |

### 3.3 在庫管理機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-012 | 在庫確認 | 商品の現在の在庫状況を確認する機能 | 高 |
| F-013 | 在庫追加 | 商品の在庫を増やす機能 | 高 |
| F-014 | 在庫減少 | 商品の在庫を減らす機能 | 高 |
| F-015 | 在庫履歴表示 | 商品ごとの在庫変動履歴を表示する機能 | 中 |
| F-016 | 在庫アラート設定 | 在庫が指定数量を下回った場合にアラートを出す機能 | 低 |

### 3.4 レポート機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-017 | 在庫レポート | 現在の在庫状況をレポート形式で出力する機能 | 高 |
| F-018 | カテゴリ別商品数レポート | カテゴリごとの商品数をグラフ化して表示する機能 | 中 |
| F-019 | 日次在庫変動レポート | 日ごとの在庫変動をレポート形式で出力する機能 | 中 |
| F-020 | 月次在庫変動レポート | 月ごとの在庫変動をレポート形式で出力する機能 | 中 |
| F-021 | 在庫回転率レポート | 商品ごとの在庫回転率をレポート形式で出力する機能 | 低 |

### 3.5 ユーザー管理機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-022 | ユーザー登録 | 新規ユーザーをシステムに登録する機能 | 高 |
| F-023 | ユーザー一覧表示 | 登録済みユーザーの一覧を表示する機能 | 高 |
| F-024 | ユーザー編集 | 既存ユーザー情報を更新する機能 | 中 |
| F-025 | ユーザー削除 | ユーザーを削除（無効化）する機能 | 中 |
| F-026 | 権限管理 | ユーザーごとの権限を設定する機能 | 高 |

### 3.6 システム管理機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| F-027 | ログイン・認証 | ユーザー認証を行う機能 | 高 |
| F-028 | パスワード変更 | ユーザーのパスワードを変更する機能 | 高 |
| F-029 | システム設定 | システム全体の設定を管理する機能 | 中 |
| F-030 | ログ管理 | システムの操作ログを記録・閲覧する機能 | 中 |
| F-031 | データバックアップ | データベースのバックアップを作成する機能 | 低 |

## 4. 非機能要件

### 4.1 性能要件

| 要件ID | 項目 | 説明 | 優先度 |
|--------|------|------|--------|
| NF-001 | レスポンス時間 | 通常の操作は3秒以内に応答すること | 高 |
| NF-002 | 同時接続ユーザー数 | 最大50人の同時ユーザーに対応可能であること | 中 |
| NF-003 | データベース容量 | 最大10万件の商品データを扱えること | 高 |
| NF-004 | バックアップ時間 | バックアップ処理は30分以内に完了すること | 低 |

### 4.2 セキュリティ要件

| 要件ID | 項目 | 説明 | 優先度 |
|--------|------|------|--------|
| NF-005 | ユーザー認証 | ID/パスワードによる認証を行うこと | 高 |
| NF-006 | パスワード管理 | パスワードはハッシュ化して保存すること | 高 |
| NF-007 | 権限制御 | 機能ごとに利用権限を制御できること | 高 |
| NF-008 | 操作ログ | 重要な操作はログに記録すること | 中 |
| NF-009 | データ暗号化 | 通信データはSSL/TLSで暗号化すること | 中 |

### 4.3 運用要件

| 要件ID | 項目 | 説明 | 優先度 |
|--------|------|------|--------|
| NF-010 | 稼働時間 | 24時間365日の稼働が可能であること | 高 |
| NF-011 | バックアップ | 1日1回の自動バックアップを行うこと | 高 |
| NF-012 | データ復旧 | 障害発生時にデータを復旧できること | 高 |
| NF-013 | メンテナンス | 計画的なメンテナンスが実施可能であること | 中 |

### 4.4 互換性要件

| 要件ID | 項目 | 説明 | 優先度 |
|--------|------|------|--------|
| NF-014 | ブラウザ対応 | 主要ブラウザ（Chrome, Firefox, Safari, Edge）に対応すること | 高 |
| NF-015 | レスポンシブ対応 | PC, タブレット, スマートフォンに対応したレイアウトであること | 中 |
| NF-016 | 外部システム連携 | 将来的に外部システムとのデータ連携が可能な設計とすること | 低 |

## 5. 画面要件

### 5.1 共通要件
- すべての画面で共通のヘッダー・フッターを表示する
- ログイン状態とユーザー名を表示する
- メニューからは主要機能に簡単にアクセスできるようにする

### 5.2 画面一覧

| 画面ID | 画面名 | 説明 | 優先度 |
|--------|--------|------|--------|
| S-001 | ログイン画面 | ユーザー認証を行うための画面 | 高 |
| S-002 | メインメニュー画面 | 各機能へのアクセスを提供するメニュー画面 | 高 |
| S-003 | 商品一覧画面 | 登録されている商品の一覧を表示する画面 | 高 |
| S-004 | 商品詳細画面 | 商品の詳細情報を表示する画面 | 高 |
| S-005 | 商品登録・編集画面 | 商品情報を登録・編集するための画面 | 高 |
| S-006 | カテゴリ管理画面 | カテゴリの一覧・登録・編集を行う画面 | 高 |
| S-007 | 在庫一覧画面 | 在庫状況の一覧を表示する画面 | 高 |
| S-008 | 在庫操作画面 | 在庫の増減を行うための画面 | 高 |
| S-009 | 在庫履歴画面 | 商品ごとの在庫履歴を表示する画面 | 中 |
| S-010 | レポート一覧画面 | 各種レポートへのアクセスを提供する画面 | 中 |
| S-011 | ユーザー管理画面 | ユーザーの一覧・登録・編集を行う画面 | 高 |
| S-012 | システム設定画面 | システム全体の設定を行う画面 | 中 |

## 6. 外部インターフェース要件

### 6.1 ユーザーインターフェース
- Webブラウザ上で動作するHTML/CSS/JavaScriptのUI
- Bootstrap等のフレームワークを利用し、統一感のあるデザインとする
- 直感的な操作が可能なUI設計とする

### 6.2 ソフトウェアインターフェース
- PostgreSQLデータベースとの連携
- Spring Bootによるバックエンド処理
- Thymeleafによるテンプレート処理

### 6.3 通信インターフェース
- HTTPSによる安全な通信
- JSONによるデータ交換（将来的なAPI連携用）

## 7. データ移行要件

### 7.1 移行対象データ
- 商品マスタ
- カテゴリマスタ
- 在庫データ
- ユーザーデータ

### 7.2 移行方式
- CSVデータによる一括登録
- 管理画面からのデータインポート機能

## 8. テスト要件

### 8.1 テスト種類
- 単体テスト
- 統合テスト
- システムテスト
- 受入テスト
- E2Eテスト（Playwright）

### 8.2 テスト環境
- 開発環境：開発者のPC環境
- テスト環境：専用のテスト用サーバー
- ステージング環境：本番に近い構成の検証環境
- 本番環境：実際のサービス提供環境

## 9. 制約条件

### 9.1 技術的制約
- Spring Boot 3.x系を使用すること
- PostgreSQL 15.x系を使用すること
- Java 17以上で開発すること
- pgAuditによる監査機能を実装すること

### 9.2 業務的制約
- 商品数が将来的に増加しても対応可能な設計とすること
- 在庫管理の履歴は最低5年間保持すること
- 操作性を重視し、ユーザートレーニングが最小限になるよう考慮すること

## 10. その他要件

### 10.1 ドキュメント
- システム設計書
- 操作マニュアル
- 管理者マニュアル
- データベース定義書

### 10.2 保守・運用
- 障害発生時の対応フロー
- バックアップと復元の手順
- セキュリティアップデートの適用方法

---

文書作成日: 2025年5月17日  
文書管理番号: REQ-001  
バージョン: 1.0
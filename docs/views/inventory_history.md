# 在庫履歴画面仕様書

最終更新日: 2025年5月4日

## 1. 画面概要

特定商品または全商品の在庫変動履歴を表示する画面です。

## 2. 画面レイアウト

### ワイヤーフレーム

```
+-----------------------------------------------+
|  商品管理 > 商品詳細 > 在庫履歴    ログアウト  |
+-----------------------------------------------+
|                                               |
|  [詳細へ戻る]                                 |
|                                               |
|  商品: 商品A (ID: 001)                       |
|                                               |
|  期間: [▼過去3ヶ月] [日付指定] [適用]        |
|                                               |
|  区分: [□入庫] [□出庫] [適用]               |
|                                               |
|  +--------+--------+--------+--------+------+ |
|  | 日時   | 区分   | 数量   | 担当者 | 理由 | |
|  +--------+--------+--------+--------+------+ |
|  | 05/01  | 入庫   | +50    | 山田   | 入荷 | |
|  | 17:30  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | 04/25  | 出庫   | -30    | 鈴木   | 販売 | |
|  | 14:15  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | 04/20  | 入庫   | +100   | 田中   | 入荷 | |
|  | 10:05  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | ...    | ...    | ...    | ...    | ...  | |
|  +--------+--------+--------+--------+------+ |
|                                               |
|  [<<] [<] 1 2 3 ... [>] [>>]   全45件        |
|                                               |
|  [CSVダウンロード]                            |
|                                               |
+-----------------------------------------------+
```

## 3. フィルター条件

| 項目名 | 入力/選択項目 | 備考 |
|-------|-------------|------|
| 期間 | ドロップダウン | 「過去3ヶ月」「過去6ヶ月」「過去1年」「全期間」「日付指定」 |
| 日付指定 | 日付ピッカー | 期間で「日付指定」を選択した場合に表示される開始日と終了日の選択 |
| 区分 | チェックボックス | 「入庫」「出庫」を個別に選択可能 |

## 4. 一覧表示項目

| 項目名 | 表示内容 | ソート | 備考 |
|-------|---------|------|------|
| 日時 | 在庫変動が発生した日時 | 〇 | MM/DD（当年）と時間（HH:MM）、デフォルトの並び順（降順） |
| 区分 | 入庫/出庫の区分 | 〇 | 入庫は青字、出庫は赤字で表示 |
| 数量 | 増減数量 | 〇 | +/-記号付きで表示 |
| 担当者 | 操作を行ったユーザー名 | 〇 | |
| 理由 | 在庫変動理由 | 〇 | 「入荷」「販売」「返品」「廃棄」など |

## 5. ボタン/リンク

| 名称 | 処理内容 |
|------|---------|
| 詳細へ戻る | 商品詳細画面へ遷移 |
| 適用（期間） | 選択された期間で履歴を絞り込む |
| 適用（区分） | 選択された区分で履歴を絞り込む |
| ページネーション | 対象ページの結果を表示 |
| CSVダウンロード | 現在表示されている条件の履歴データをCSV形式でダウンロード |

## 6. ページネーション

表示件数を超える履歴がある場合、ページネーションを表示します。

- 「<<」：先頭ページへ
- 「<」：前のページへ
- ページ番号：対応するページへ
- 「>」：次のページへ
- 「>>」：最終ページへ

## 7. CSVダウンロード

CSVダウンロードボタンをクリックすると、現在の絞り込み条件に合致する履歴データがCSV形式でダウンロードされます。

CSVのヘッダー行と例：
```
商品ID,商品名,日時,区分,数量,担当者,理由,備考
001,商品A,2025/05/01 17:30,入庫,50,山田太郎,入荷,定期発注分
001,商品A,2025/04/25 14:15,出庫,-30,鈴木一郎,販売,オンライン注文
...
```

## 8. 遷移先

| イベント | 遷移先画面 |
|---------|-----------|
| 詳細へ戻るをクリック | 商品詳細画面（対象商品） |

## 9. 特記事項

- 在庫履歴は新しい順（日時の降順）に表示される
- 「全商品の在庫履歴」を表示する場合は、商品名欄にデータを追加表示する
- 在庫履歴の詳細情報（メモ欄など）は、行をクリックすると表示されるポップアップで確認できる
- CSVダウンロードでは、現在の絞り込み条件が適用されたデータのみが出力される
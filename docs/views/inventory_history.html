<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在庫履歴画面仕様書</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }
        h2 {
            margin-top: 30px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .wireframe {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>在庫履歴画面仕様書</h1>
    <p>最終更新日: 2025年5月4日</p>

    <h2>1. 画面概要</h2>
    <p>特定商品または全商品の在庫変動履歴を表示する画面です。</p>

    <h2>2. 画面レイアウト</h2>
    <div class="wireframe">
        <h3>ワイヤーフレーム</h3>
        <pre>
+-----------------------------------------------+
|  商品管理 > 商品詳細 > 在庫履歴    ログアウト  |
+-----------------------------------------------+
|                                               |
|  [詳細へ戻る]                                 |
|                                               |
|  商品: 商品A (ID: 001)                       |
|                                               |
|  期間: [▼過去3ヶ月] [日付指定] [適用]        |
|                                               |
|  区分: [□入庫] [□出庫] [適用]               |
|                                               |
|  +--------+--------+--------+--------+------+ |
|  | 日時   | 区分   | 数量   | 担当者 | 理由 | |
|  +--------+--------+--------+--------+------+ |
|  | 05/01  | 入庫   | +50    | 山田   | 入荷 | |
|  | 17:30  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | 04/25  | 出庫   | -30    | 鈴木   | 販売 | |
|  | 14:15  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | 04/20  | 入庫   | +100   | 田中   | 入荷 | |
|  | 10:05  |        |        |        |      | |
|  +--------+--------+--------+--------+------+ |
|  | ...    | ...    | ...    | ...    | ...  | |
|  +--------+--------+--------+--------+------+ |
|                                               |
|  [<<] [<] 1 2 3 ... [>] [>>]   全45件        |
|                                               |
|  [CSVダウンロード]                            |
|                                               |
+-----------------------------------------------+
        </pre>
    </div>

    <h2>3. フィルター条件</h2>
    <table>
        <thead>
            <tr>
                <th>項目名</th>
                <th>入力/選択項目</th>
                <th>備考</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>期間</td>
                <td>ドロップダウン</td>
                <td>「過去3ヶ月」「過去6ヶ月」「過去1年」「全期間」「日付指定」</td>
            </tr>
            <tr>
                <td>日付指定</td>
                <td>日付ピッカー</td>
                <td>期間で「日付指定」を選択した場合に表示される開始日と終了日の選択</td>
            </tr>
            <tr>
                <td>区分</td>
                <td>チェックボックス</td>
                <td>「入庫」「出庫」を個別に選択可能</td>
            </tr>
        </tbody>
    </table>

    <h2>4. 一覧表示項目</h2>
    <table>
        <thead>
            <tr>
                <th>項目名</th>
                <th>表示内容</th>
                <th>ソート</th>
                <th>備考</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>日時</td>
                <td>在庫変動が発生した日時</td>
                <td>〇</td>
                <td>MM/DD（当年）と時間（HH:MM）、デフォルトの並び順（降順）</td>
            </tr>
            <tr>
                <td>区分</td>
                <td>入庫/出庫の区分</td>
                <td>〇</td>
                <td>入庫は青字、出庫は赤字で表示</td>
            </tr>
            <tr>
                <td>数量</td>
                <td>増減数量</td>
                <td>〇</td>
                <td>+/-記号付きで表示</td>
            </tr>
            <tr>
                <td>担当者</td>
                <td>操作を行ったユーザー名</td>
                <td>〇</td>
                <td></td>
            </tr>
            <tr>
                <td>理由</td>
                <td>在庫変動理由</td>
                <td>〇</td>
                <td>「入荷」「販売」「返品」「廃棄」など</td>
            </tr>
        </tbody>
    </table>

    <h2>5. ボタン/リンク</h2>
    <table>
        <thead>
            <tr>
                <th>名称</th>
                <th>処理内容</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>詳細へ戻る</td>
                <td>商品詳細画面へ遷移</td>
            </tr>
            <tr>
                <td>適用（期間）</td>
                <td>選択された期間で履歴を絞り込む</td>
            </tr>
            <tr>
                <td>適用（区分）</td>
                <td>選択された区分で履歴を絞り込む</td>
            </tr>
            <tr>
                <td>ページネーション</td>
                <td>対象ページの結果を表示</td>
            </tr>
            <tr>
                <td>CSVダウンロード</td>
                <td>現在表示されている条件の履歴データをCSV形式でダウンロード</td>
            </tr>
        </tbody>
    </table>

    <h2>6. ページネーション</h2>
    <p>表示件数を超える履歴がある場合、ページネーションを表示します。</p>
    <ul>
        <li>「<<」：先頭ページへ</li>
        <li>「<」：前のページへ</li>
        <li>ページ番号：対応するページへ</li>
        <li>「>」：次のページへ</li>
        <li>「>>」：最終ページへ</li>
    </ul>

    <h2>7. CSVダウンロード</h2>
    <p>CSVダウンロードボタンをクリックすると、現在の絞り込み条件に合致する履歴データがCSV形式でダウンロードされます。</p>
    <p>CSVのヘッダー行と例：</p>
    <pre>
    商品ID,商品名,日時,区分,数量,担当者,理由,備考
    001,商品A,2025/05/01 17:30,入庫,50,山田太郎,入荷,定期発注分
    001,商品A,2025/04/25 14:15,出庫,-30,鈴木一郎,販売,オンライン注文
    ...
    </pre>

    <h2>8. 遷移先</h2>
    <table>
        <thead>
            <tr>
                <th>イベント</th>
                <th>遷移先画面</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>詳細へ戻るをクリック</td>
                <td>商品詳細画面（対象商品）</td>
            </tr>
        </tbody>
    </table>

    <h2>9. 特記事項</h2>
    <ul>
        <li>在庫履歴は新しい順（日時の降順）に表示される</li>
        <li>「全商品の在庫履歴」を表示する場合は、商品名欄にデータを追加表示する</li>
        <li>在庫履歴の詳細情報（メモ欄など）は、行をクリックすると表示されるポップアップで確認できる</li>
        <li>CSVダウンロードでは、現在の絞り込み条件が適用されたデータのみが出力される</li>
    </ul>
</body>
</html>